spack:
  #upstreams:
  #  slash-software:
  #    install_tree: /software/spack/v0.13.2-9600-g5f36801aa7-2925a5e/software/spack/opt/spack
  config:
    install_missing_compilers: true
    source_cache: /software/spack/mirror
    url_fetch_method: curl
  mirrors:
    software-mirror: file://software/spack/mirror
  modules:
    default:
      lmod:
        core_compilers:
        - gcc@8.4.1
  packages:
    autoconf:
      externals:
      - spec: autoconf@2.69
        prefix: /usr
      buildable: false
    automake:
      externals:
      - spec: automake@1.13.4
        prefix: /usr
      buildable: false
    bash:
      externals:
      - spec: bash@4.2.46
        prefix: /usr
      buildable: false
    berkeley-db:
      externals:
      - spec: berkeley-db@5.3.21
        prefix: /usr
      buildable: false
    bzip2:
      externals:
      - spec: bzip2@1.0.6
        prefix: /usr
      buildable: false
    cpio:
      externals:
      - spec: cpio@2.11
        prefix: /usr
      buildable: false
    curl:
      externals:
      - spec: curl@7.29.0+ldap
        prefix: /usr
      buildable: false
    diffutils:
      externals:
      - spec: diffutils@3.3
        prefix: /usr
      buildable: false
    doxygen:
      externals:
      - spec: doxygen@1.8.5~graphviz~mscgen
        prefix: /usr
      buildable: false
    file:
      externals:
      - spec: file@5.11
        prefix: /usr
      buildable: false
    findutils:
      externals:
      - spec: findutils@4.5.11
        prefix: /usr
      buildable: false
    flex:
      externals:
      - spec: flex@2.5.37+lex
        prefix: /usr
      buildable: false
    gawk:
      externals:
      - spec: gawk@4.0.2
        prefix: /usr
      buildable: false
    gcc:
      externals:
      - spec: gcc@4.8.5 languages=c,c++,fortran
        prefix: /usr
        extra_attributes:
          compilers:
            c: /usr/bin/x86_64-redhat-linux-gcc
            cxx: /usr/bin/x86_64-redhat-linux-g++
            fortran: /usr/bin/gfortran
    git:
      externals:
      - spec: git@1.8.3.1~tcltk
        prefix: /usr
    gmake:
      externals:
      - spec: gmake@3.82
        prefix: /usr
      buildable: false
    groff:
      externals:
      - spec: groff@1.22.2
        prefix: /usr
      buildable: false
    krb5:
      externals:
      - spec: krb5@1.15.1
        prefix: /usr
      buildable: false
    libfuse:
      externals:
      - spec: libfuse@2.9.2
        prefix: /usr
      buildable: false
    libtool:
      externals:
      - spec: libtool@2.4.2
        prefix: /usr
      buildable: false
    lustre:
      externals:
      - spec: lustre@2.12.4
        prefix: /usr
      buildable: false
    m4:
      externals:
      - spec: m4@1.4.16
        prefix: /usr
      buildable: false
    mofed:
      externals:
      - spec: mofed@OFED-internal-4.7-3.2.9
        prefix: /usr
      buildable: false
    ncurses:
      externals:
      - spec: ncurses@5.9.20130511+termlib abi=5
        prefix: /usr
      buildable: false
    openssh:
      externals:
      - spec: openssh@7.4p1
        prefix: /usr
      buildable: false
    openssl:
      externals:
      - spec: openssl@1.0.2k-fips
        prefix: /usr
      buildable: false
    perl:
      externals:
      - spec: perl@5.16.3~cpanm+shared+threads
        prefix: /usr
      buildable: false
    pkg-config:
      externals:
      - spec: pkg-config@0.27.1
        prefix: /usr
      buildable: false
    rsync:
      externals:
      - spec: rsync@3.1.2
        prefix: /usr
      buildable: false
    sed:
      externals:
      - spec: sed@4.2.2
        prefix: /usr
      buildable: false
    sqlite:
      externals:
      - spec: sqlite@3.7.17~fts~functions+rtree
        prefix: /usr
      buildable: false
    tar:
      externals:
      - spec: tar@1.26
        prefix: /usr
      buildable: false
    ucx:
      externals:
      - spec: ucx@1.7.0+cm+cma+dc+dm+ib-hw-tm+java+knem+rc+thread_multiple+ud
        prefix: /usr
    xz:
      externals:
      - spec: xz@5.2.2
        prefix: /usr
      buildable: false
    zip:
      externals:
      - spec: zip@3.0
        prefix: /usr
      buildable: false
    all:
      target: [x86_64, aarch64]
      compiler: [gcc@8.4.1]
    nvhpc:
      variants:
      - ~mpi
      - ~blas
      - ~lapack
    aocc:
      variants:
      - +license-agreed
    openmpi:
      variants:
      - fabrics='knem,ucx' # comma not handle
      - +legacylaunchers
      - +pmix
      - schedulers=slurm
      - +thread_multiple
  specs:
  - python
  - py-numpy@1.19.0
  - py-scipy@1.5.1
  - py-matplotlib@3.2.2
  - py-tqdm@4.47.0
  - casacore+python ^fftw~mpi
  - py-astropy@4.0.1
  - py-invoke@1.4.1
  - py-seaborn@0.11.2
  - py-python-dateutil
  - py-cython@0.29.21
  - py-icecream
  - py-python-casacore
  view: false
  concretization: together
  compilers:
  - compiler:
      spec: gcc@8.4.1
      paths:
        cc: /usr/bin/gcc
        cxx: /usr/bin/g++
        f77: /usr/bin/gfortran
        fc: /usr/bin/gfortran
      flags: {}
      operating_system: rhel8
      target: x86_64
      modules: []
      environment: {}
      extra_rpaths: []
